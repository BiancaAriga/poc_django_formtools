{% extends "./base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block head %}
    {{ wizard.form.media }}
{% endblock %}

{% block content %}
    <div id="form-container">
        <form action="" method="post" id="wizard-form" class="pattern-form">
            {% csrf_token %}
            <div class="d-flex align-items-center">
                {% if wizard.steps.prev %}
                    <button class="btn btn-light rounded-5" name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}" formnovalidate>
                        <i class="bi bi-arrow-left"></i>
                    </button>
                {% endif %}
                <span class="fw-bold">{{ step_message }}</span>
            </div>
            <div class="d-flex justify-content-between gap-2 py-3 mb-3">
                {% for step in wizard.steps.all %}
                    <div class="wizard-step" style="height: 5px; width: {{ step_width }}%;"></div>
                {% endfor %}
            </div>

            {{ wizard.management_form }}
            {% include template_name %}
            <div class="mt-3 d-flex flex-row-reverse">
                <input class="btn btn-primary rounded-5 fw-semibold py-2 px-3" type="submit" value="PrÃ³ximo"/>
            </div>
        </form>
    </div>
    <script>
        var step1Value = {{ wizard.steps.step1 }};
        var steps = document.querySelectorAll('.wizard-step');
        steps.forEach(function(step, index) {
            step.classList.remove('bg-primary', 'bg-secondary', 'bg-success', 'bg-danger');
            if (index + 1 <= step1Value) {
                step.classList.add('bg-primary');
            } else {
                step.classList.add('bg-secondary');
            }
        });
    </script>
{% endblock %}
